<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="kr.co.loyd.dao.WatchDao">
	<!-- 조건 + 페이징 -->
	
	<select id="one" parameterType="Long" resultType="kr.co.loyd.dto.MemberDto">
		select * from member where id = #{id}
	</select>

	<select id="list" resultType="kr.co.loyd.dto.MemberDto">
		select * from member
	</select>

	<insert id="insert">
		insert into
		member(email, pwd, name, phone, register_date)
		values(#{email}, #{pwd}, #{name}, #{phone}, sysdate())
	</insert>

	<!-- 관리자가 상품 등록 -->
	<insert id="upload_ok" parameterType="kr.co.loyd.dto.WatchDto">
		insert into watch(name,brand,price,category,content,discount,picture,kind) 
		values(#{name},#{brand},#{price},#{category},#{content},#{discount},#{picture},#{kind})
	</insert>
	
	
	<!-- 상품 목록(페이징) -->
	<select id="get_cnt" resultType="Integer">
 		select ceil(count(*)/7) from watch
	</select>
	<!-- 등록한 상품 목록보기 -->
	<select id="watch_list" resultType="kr.co.loyd.dto.WatchDto">
		select * from watch order by id desc limit #{param1},7
	</select>

    <!-- 상품 삭제 -->
	<delete id="delete">
		delete from watch where id = #{param1}
	</delete>

	<!-- 상품 상세  -->
	<select id="content" resultType="kr.co.loyd.dto.WatchDto">
        select * from watch where id=#{param1}
    </select>

    <select id="update" resultType="kr.co.loyd.dto.WatchDto">
        select * from watch where id=#{param1}
    </select>   

	
	<insert id="update_ok" parameterType="kr.co.loyd.dto.WatchDto">
		update watch set name=#{name},brand=#{brand},price=#{price},category=#{category},
		content=#{content},discount=#{discount},picture=#{picture},kind=#{kind} where id=#{id}
    </insert>

	
	
</mapper>