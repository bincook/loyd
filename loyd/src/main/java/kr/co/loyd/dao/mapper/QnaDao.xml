<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.loyd.dao.QnaDao">

	<insert id="insert_ok" >		
		insert into 
		qna(watch_id,content,title,pwd,secret,qnatype,email,writeday) 
		values(#{watch_id}, #{content}, #{title},#{pwd},#{secret},#{qnatype},#{email},now())
	</insert>
 
 	<!--   Q&A 문의글 목록 (원래)  -->
	<select id="list" resultType="kr.co.loyd.dto.QnaDto">
		select qnatype,content,email,writeday,secret from qna 
		order by secret desc, writeday desc limit #{param1},7
	</select>
	 
	<!--  Q&A 문의글 목록(페이징) -->
	<select id="get_cnt" resultType="Integer">
 		select ceil(count(*)/7) from qna
	</select>
	

	<!-- 대시보드 문의글 최근 5개 목록 조회  -->
	<select id="dash_listq" resultType="kr.co.loyd.dto.QnaDto">
		select content,writeday from qna order by writeday desc limit 0,5
	</select>
	<!-- 대시보드 그래프 : 문의글 총 합계  : 한 달 전 데이터 출력ing -->
	<select id="totq" resultType="String">
	 	select count(*)from qna;
	</select>
	
	
	

</mapper>